{% extends 'base.html' %}
{% load static %}
{% load app_tags %}
{% load staticfiles %}

{% block title %}
  Profile - {{ block.super }} 
{% endblock title %}



{% block content %}


<img class="d-block w-100" src="https://www.country1067.com/wp-content/uploads/sites/28/2017/07/logoImage_4.jpg" height=400 >
<div id="vue-container">
  <nav class="dt w-100 border-box pa3 ph5-ns">
    <div class="dtc v-mid w-75 tr">
      {% comment %} search bars {% endcomment %}
      {% if user.is_authenticated %}
        <a @click.prevent="showFeedNotAll=true, showPostsNotUsers=true" class="f6 link dim ph3 pv1 mb2 dib white bg-dark-green" href="#" title="Feed">Feed</a>
      {% endif %}
      <a class="f6 link dim ph3 pv1 mb2 dib white bg-dark-blue" @click.prevent="getPosts(), showFeedNotAll=false" href="#">All Posts</a>
      <a class="link dark-gray f6 f5-ns dib mr3 mr4-ns" href="#" title="search">
        <div class="form-inline my-2 my-lg-0"> 
          <input class="form-control mr-sm-2" type="text" placeholder="Search posts.." v-model="search_term">
          <button class="btn btn-outline-success my-2 my-sm-0 mr2" @click.prevent="getPosts(), showFeedNotAll=false">Search Posts</button>
          <input class="form-control mr-sm-2" type="text" placeholder="Search users.." v-model="username_search">
          <button class="btn btn-outline-success my-2 my-sm-0 mr2" @click.prevent="getUsers()">Search Users</button>
        </div>
      </a>
    </div>
  </nav>
  <div class="mw9 center ph3-ns">
    <div class="cf ph2-ns">
      <div class="fl w-25 pa2">
        <div class="outline bg-white pv4">
        {% comment %} Profile card for logged in users {% endcomment %}

          <article class="mw5 center bg-white br3 pa3 pa4-ns mv3 ba b--black-10">
            <div class="tc">
              {% if user.is_authenticated %}
         
               <div v-if="users[0]">
              <hr class="mw3 bb bw1 b--black-10">
            </div>
             <a href="{% url 'profile' %}"><img src="{{ user|gravatar:50 }}" class="br-100 h3 w3 dib" alt="Profile avatar"></a>
            <h1>@${loggedInUser.username}</h1>
            <span>
              <a @click.prevent="getUsers(), showFollowersNotAll=true" href="#" class="f4 dim blue no-underline">Followers: ${loggedInUser.followers.length}  </a> 
              <a @click.prevent="getUsers(), showFollowingNotAll=true" href="#7" class="f4 dim blue no-underline">  Following: ${loggedInUser.users_followed.length}</a>
            </span>
            <p class="lh-copy measure center f4 black-85">${loggedInUser.bio}</p>
            <div>
              {% else %}
              <a class="f3 link bg-animate black hover-bg-light-green dib pa3 ph4-l" href="{% url 'registration_register' %}">Create a Decree Account</a>

              {% endif %}
          
              </div>
          </article>


                <div class="fl w-25-ns pa2" >
      
        <div v-if="showFollowingNotAll" >
        <h1>Following:</h1>
          
            <article v-for="user in users" :key="user.pk">
              <div v-if="isFollowed(user)">
                <article class="mw5 center bg-white br3 pa3 pa4-ns mv3 ba b--black-10">
                  <div class="tc">
         
                    <hr class="mw3 bb bw1 b--black-10">
        
            {% comment %} <img src="{{ user|gravatar:50 }}" class="br-100 h3 w3 dib" alt="Profile avatar"> {% endcomment %}

                  <h2>@${user.username}</h2>
                  <span>
                    <a @click.prevent="getUsers(), showFollowersNotAll=true" href="#" class="f4 dim blue no-underline">Followers: ${user.followers.length}  </a> 
                    <a @click.prevent="getUsers(), showFollowingNotAll=true" href="#7" class="f4 dim blue no-underline">  Following: ${user.users_followed.length}</a>
                  </span>
                  <p class="lh-copy measure center f4 black-85">${user.bio}</p>
                  <div>

                </article>
              </div>
            </article>
         
       
            
            {% comment %} <h2> Suggested: </h2> {% endcomment %}
          </div>
        </div>



      <div class="fl w-third flex justify-between " >
        <div v-if="showFollowersNotAll" >
        <h1>Followers:</h1>
         
            <article v-for="user in users" :key="user.pk">
              <div v-if="isFollowing(user)">
                <article class="mw5 center bg-white br3 pa3 pa4-ns mv3 ba b--black-10">
                  <div class="tc">
         
                    <hr class="mw3 bb bw1 b--black-10">
        
            {% comment %} <img src="{{ user|gravatar:50 }}" class="br-100 h3 w3 dib" alt="Profile avatar"> {% endcomment %}

                  <h2>@${user.username}</h2>
                  <span>
                    <a @click.prevent="getUsers(), showFollowersNotAll=true" href="#" class="f4 dim blue no-underline">Followers: ${user.followers.length}  </a> 
                    <a @click.prevent="getUsers(), showFollowingNotAll=true" href="#7" class="f4 dim blue no-underline">  Following: ${user.users_followed.length}</a>
                  </span>
                  <p class="lh-copy measure center f4 black-85">${user.bio}</p>
                  <div>

                </article>
              </div>
            </article>



          


                  {% comment %} 
                  <div class="tc">

                     <a :href="{% url 'profile' %}"><img src="http://tachyons.io/img/logo.jpg" class="br-100 h3 w3 dib" title="Avatar"></a>
                     
                    <div>
                      <a :post='post' :id="post.pk" @click="toggle(post)"  class="f6 grow no-underline br-pill ba ph3 pv1 dib mid-gray" href="#0">View Comments</a>
                    </div>
                  </div>
                </div>
                 Tweets generated here {% endcomment %}
  {% endblock %}